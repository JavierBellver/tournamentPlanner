<html>
	<head>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	</head>
	<body>
		<h1>Lista de organizadores</h1>
		<div id="organizers"></div>
		<div id="paginacion"></div>
		<div id="registerOrganizerForm">
			<h2>Nuevo Organizador</h2>
			<input id="organizerEmailInput" type="text" placeholder="Email del organizador"/>
			<input id="organizerNameInput" type="text" placeholder="Nombre del organizador"/>
			<input id="organizerOrgInput" type="text" placeholder="Organizacion a la que pertenece"/>
			<button id="AddOrganizerButton">Registrar un nuevo organizador</button>
		</div>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA=" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<script type="application/javascript">
			var API_URL = 'http://' + window.location.host + '/api/organizers';

			function refreshOrganizers(pagenumber,tamPage) {
				$.ajax({
					url: API_URL,
					method: "GET",
					headers: {
						'Authorization': 'Bearer '+localStorage.getItem('token'),
					},
					success: function(data) {
						for(var i = 0;i<data.length;i++) {
							$('#organizers').append('<div class=organizer>')
							$('#organizers').append(data[i].email)
							$('#organizers').append('<span className="detalles"><a href="#" class="detallesLink">Detalles</a></span>')
							$('#organizers').append('<span className="editar"><a href="#" class="editarLink">Editar</a></span>')
							$('#organizers').append('<span className="eliminar"><a href="#" class="eliminarLink">Eliminar</a></span>')
							$('#organizers').append('</div>')
						}
					},
					error: function() {
						console.log("GET Error")
					}
				});
			}

			function createOrganizer(newOrganizer) {
				$.ajax({
					url: API_URL,
					method: "POST",
					headers: {
						'Authorization': 'Bearer '+localStorage.getItem('token'),
					},
					data: JSON.stringify(newOrganizer),
					contentType: "application/json",
					dataType: 'json',
					success: function() {
						console.log("Success creating user");
					},
					error: function() {
						console.log("POST Error")
					}
				})
			}

			function editOrganizer(editedOrganizer,id) {

			}

			function deleteOrganizer(id) {

			}

			$(document).ready(function(){
				var pagenumber = 1;
				var tamPage = 3;
				refreshOrganizers(pagenumber,tamPage);
				$('#AddOrganizerButton').on('click', function(){
					var newOrganizer = {
						email: $("#organizerEmailInput").val(),
						name: $("#organizerNameInput").val(),
						organizacion: $("#organizerOrgInput").val(),
					}
					createOrganizer(newOrganizer);
				})
				$('#organizers').on('click','.detallesLink', function(){
					console.log('details');
				})
				$('#organizers').on('click','.editarLink', function(){
					console.log('editar');
				})
				$('#organizers').on('click','.eliminarLink', function(){
					console.log('eliminar');
				})
				console.log('document ready');
				console.log($('.detallesLink a'))
			})
		</script>
	</body>
</html>